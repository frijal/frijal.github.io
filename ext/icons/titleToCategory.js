// titleToCategory.js (versi ESM)
const categories = [
  {
    name: 'ðŸ“½ï¸ Multimedia & Editing',
    priority: 3,
    keywords: [
      'ffmpeg',
      'video',
      'film',
      'audio',
      'mp3',
      'ogg',
      'rekam',
      'convert',
      'ai',
      'split',
      'cut',
      'durasi',
      'imagemagick',
      'resize',
      'format',
      'potong',
      'watermark',
      'foto',
      'gambar',
      'pdf',
      'gabung',
      'kompres',
      'scan',
      'ghostscript',
      'pdftk',
      'vlc',
      'multimedia',
      'codec',
    ],
  },
  {
    name: 'ðŸ§ Linux & Open Source',
    priority: 5,
    keywords: [
      'linux',
      'libreoffice',
      'openoffice',
      'perl',
      'ubuntu',
      'distro',
      'lts',
      'live usb',
      'conky',
      'fedora',
      'debian',
      'arch',
      'slackware',
      'nixos',
      'opensuse',
      'blankon',
      'mirror',
      'repo',
      'apt',
      'yum',
      'rsync',
      'grub',
      'chroot',
      'dpkg',
      'open source',
      'oss',
      'foss',
      'komunitas',
      'kpli',
      'gnome',
      'kde',
      'compiz',
      'desktop',
      'ubuntu party',
    ],
  },
  {
    name: 'ðŸ“š Islam & Kehidupan',
    priority: 4,
    keywords: [
      'islam',
      'shalat',
      'akidah',
      'aqidah',
      'qunut',
      'istigfar',
      'istighfar',
      'mukjizat',
      'masjid',
      'madinah',
      'imam',
      'risalah',
      'nabi',
      'quran',
      'hadis',
      'hijriyah',
      'muslim',
      'doa',
      'hukum',
      'halal',
      'haram',
      'syariat',
      'fiqh',
      'hijab',
      'ramadhan',
      'maulid',
      'piagam madinah',
      'mushaf utsman',
      'tabut',
      'iman',
      'sabar',
      'ghibah',
      'fitnah',
      'sombong',
      'salam',
      'janji',
    ],
  },
  {
    name: 'ðŸžï¸ Budaya, Kuliner & Lifestyle',
    priority: 2,
    keywords: [
      'kuliner',
      'obat',
      'sakit',
      'pecel',
      'minuman',
      'jagung',
      'kerupuk',
      'angkringan',
      'kurma',
      'kopi',
      'camilan',
      'wisata',
      'jogja',
      'bali',
      'bekapai',
      'hotel',
      'bandara',
      'respiro',
      'tidur',
      'kesehatan',
      'psikotes',
      'wanita',
      'bahagia',
    ],
  },
  {
    name: 'ðŸ“° Catatan & Sosial',
    priority: 1,
    keywords: [
      'catatan',
      'pt',
      'kopdar',
      'sejarah',
      'indonesia',
      'peradaban',
      'sahabat',
      'kota',
      'rencana',
      'kreativitas',
      'ibu',
      'perjalanan',
      'bisnis',
      'perusahaan',
      'ekspedisi',
      'aturan',
      'harian',
      'cuti',
      'nostalgia',
      'renungan',
      'golput',
      'duit',
      'pekerjaan',
      'kerja halal',
      'perencanaan',
      'produktifitas',
      'fenomena',
      'sktm',
      'ppdb',
    ],
  },
  {
    name: 'ðŸ’» Windows & Teknologi Umum',
    priority: 3,
    keywords: [
      'windows',
      'git',
      'learning',
      'cpu',
      'samba',
      'jaringan',
      'software',
      'terminal',
      'github',
      'shutdown',
      'hdd',
      'ssd',
      'refresh',
      'optimasi',
      'bootloader',
      'virtualbox',
      'keyring',
      'laptop',
      'osborne1',
      'baterai',
      'mic',
      'wifi',
      'amd',
      'cooling',
      'phishing',
      'eula',
      'lisensi',
      'piracy',
    ],
  },
]

export function titleToCategory(title) {
  const t = title.toLowerCase()
  let bestMatch = { name: 'ðŸ—‚ï¸ Lainnya', score: 0, priority: 0 }

  for (const cat of categories) {
    let score = 0
    for (const k of cat.keywords) {
      const regex = new RegExp(`\\b${k}\\b`, 'i') // match kata utuh
      if (regex.test(t)) {
        score++
      }
    }

    if (
      score > bestMatch.score ||
      (score === bestMatch.score && cat.priority > bestMatch.priority)
    ) {
      bestMatch = { name: cat.name, score, priority: cat.priority }
    }
  }

  return bestMatch.name
}
