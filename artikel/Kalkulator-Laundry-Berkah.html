<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator Laundry Berkah</title>

  <meta name="description" content="Hitung biaya laundry kiloan atau satuan dengan cepat dan akurat. Kalkulator Laundry Berkah mempermudah manajemen pesanan dan memberikan total harga secara instan.">
  <meta name="keywords" content="kalkulator laundry, harga laundry kiloan, laundry satuan, manajemen laundry, aplikasi kasir laundry, berkah laundry, hitung biaya laundry">
  <meta name="author" content="Berkah Laundry">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://frijal.pages.dev/artikel/Kalkulator-Laundry-Berkah.html">

  <meta property="og:title" content="Kalkulator Laundry Berkah - Hitung Cepat & Akurat">
  <meta property="og:description" content="Hitung biaya laundry kiloan atau satuan dengan cepat dan akurat. Kalkulator Laundry Berkah mempermudah manajemen pesanan dan memberikan total harga secara instan.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://frijal.pages.dev/artikel/Kalkulator-Laundry-Berkah.html">
  <meta property="og:image" content="https://frijal.pages.dev/img/Kalkulator-Laundry-Berkah.webp">
  <meta property="og:image:alt" content="Tampilan antarmuka Kalkulator Laundry Berkah">
  <meta property="og:site_name" content="Kalkulator Laundry Berkah">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kalkulator Laundry Berkah - Hitung Cepat & Akurat">
  <meta name="twitter:description" content="Hitung biaya laundry kiloan atau satuan dengan cepat dan akurat. Kalkulator Laundry Berkah mempermudah manajemen pesanan dan memberikan total harga secara instan.">
  <meta name="twitter:image" content="https://frijal.pages.dev/img/Kalkulator-Laundry-Berkah.webp">
  <meta name="twitter:image:alt" content="Tampilan antarmuka Kalkulator Laundry Berkah">
  <meta name="twitter:site" content="@frijal">
  <meta name="twitter:creator" content="@frijal">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta name="theme-color" content="#3498db">
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #f2f6ff;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 15px;
    }

    .container {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 800px;
      box-sizing: border-box;
    }

    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #333;
      font-size: 20px;
    }

    label {
      font-weight: bold;
      color: #333;
      display: block;
      margin-bottom: 5px;
    }

    input[type="text"], input[type="number"], textarea {
      width: 100%;
      padding: 6px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 13px;
      box-sizing: border-box;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
      font-size: 14px;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }

    th {
      background: #007bff;
      color: white;
    }

    button {
      background: #55a630;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      margin-top: 8px;
      display: inline-block;
    }

    .btn-export { background: #0069d9; margin-left: 10px; }
    .btn-reset { background: #dc3545; margin-left: 10px; }
    button:hover { opacity: 0.9; }

    .total-box {
      text-align: right;
      font-size: 16px;
      font-weight: bold;
      color: #007bff;
      margin-top: 10px;
    }

    .catatan-final { margin-top: 15px; }
    textarea { resize: vertical; min-height: 70px; }

    .nota-summary {
      display: none;
      background: white;
      color: #000;
      padding: 20px;
      border-radius: 10px;
      font-size: 14px;
      width: 100%;
      max-width: 700px;
      box-sizing: border-box;
    }

    .nota-summary h3 {
      text-align: center;
      margin-bottom: 10px;
      color: #007bff;
    }

    .nota-summary th { background: #007bff; color: white; }

    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr { display: block; }
      thead tr { display: none; }
      tr {
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 8px;
        background: #fefefe;
      }
      td { text-align: left; display: flex; justify-content: space-between; }
      td::before { content: attr(data-label); font-weight: bold; }
    }

  </style>
    <meta property="article:published_time" content="2025-10-14T18:15:06.377+00:00">

</head>
<body>

<div class="container" id="nota-belanja">
  <h2>Kalkulator Laundry Berkah üßæ</h2>

  <div class="konsumen-box">
    <label for="namaKonsumen">Nama Konsumen:</label>
    <input type="text" id="namaKonsumen" placeholder="siapa nama konsumen?" required>
  </div>

  <label><input type="checkbox" id="toggleDiskon" onchange="toggleKolomDiskon()"> Gunakan Diskon</label>

  <table id="tabel-belanja">
    <thead>
      <tr id="header-row">
        <th>#</th>
        <th>Nama Barang</th>
        <th>Jumlah Kilogram</th>
        <th>Harga</th>
        <th class="kolom-diskon">Diskon (%)</th>
        <th>Subtotal</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody id="daftar-item"></tbody>
  </table>
  
  <button onclick="tambahBaris()">‚ûï Tambah Barang</button>
  <div class="total-box">Total: Rp <output id="total-belanja">0</output></div>

  <div class="catatan-final">
    <label for="catatan">Catatan Jika Ada:</label>
    <textarea id="catatan" placeholder="Tuliskan catatan akhir di sini..."></textarea>
  </div>

  <button class="btn-export" onclick="exportNota()">üì∏ Export Nota (JPG)</button>
  <button class="btn-reset" onclick="resetForm()">üßæ Nota Baru</button>
</div>

<div id="nota-summary" class="nota-summary"></div>

<script>
const formatRupiah = val => val.toLocaleString("id-ID");

function hitungTotal() {
  const rows = document.querySelectorAll("#daftar-item tr");
  let total = 0;
  rows.forEach(row => {
    const harga = parseFloat(row.querySelector(".harga").value.replace(",", ".")) || 0;
    const jumlah = parseFloat(row.querySelector(".jumlah").value.replace(",", ".")) || 0;
    const diskonInput = row.querySelector(".diskon");
    const diskon = diskonInput && !diskonInput.closest("td").classList.contains("hidden") ? parseFloat(diskonInput.value) || 0 : 0;
    const subtotal = harga * jumlah * (1 - diskon / 100);
    row.querySelector(".subtotal").value = formatRupiah(subtotal);
    total += subtotal;
  });
  document.getElementById("total-belanja").value = formatRupiah(total);
  simpanKeLocalStorage();
}

function tambahBaris(data = {}) {
  const tbody = document.getElementById("daftar-item");
  const nomor = tbody.children.length + 1;
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td>${nomor}</td>
    <td><input type="text" value="${data.nama || ''}" placeholder="Nama Barang" required></td>
    <td><input type="text" class="jumlah" value="${data.jumlah || ''}" placeholder="Berat, Kilogram" required></td>
    <td><input type="number" class="harga" value="${data.harga || ''}" placeholder="Harga" required></td>
    <td class="kolom-diskon"><input type="number" class="diskon" value="${data.diskon || ''}" placeholder="Diskon (%)"></td>
    <td>Rp <output class="subtotal">${data.subtotal || '0'}</output></td>
    <td><button onclick="hapusBaris(this)">‚ùå</button></td>`;
  tbody.appendChild(tr);
  tambahEventListener();
  toggleKolomDiskon();
  hitungTotal();
}

function hapusBaris(btn) {
  btn.closest("tr").remove();
  updateNomor();
  hitungTotal();
}

function updateNomor() {
  document.querySelectorAll("#daftar-item tr").forEach((tr, i) => {
    tr.querySelector("td:first-child").textContent = i + 1;
  });
}

function tambahEventListener() {
  document.querySelectorAll(".harga, .jumlah, .diskon").forEach(el => {
    el.addEventListener("input", e => {
      let val = e.target.value.replace(/[^0-9,]/g, "");
      const parts = val.split(",");
      if (parts.length > 2) val = parts[0] + "," + parts[1];
      e.target.value = val;
      hitungTotal();
    });
  });
}

function toggleKolomDiskon() {
  const showDiskon = document.getElementById("toggleDiskon").checked;
  document.querySelectorAll(".kolom-diskon").forEach(td => {
    td.style.display = showDiskon ? "table-cell" : "none";
  });
  simpanKeLocalStorage();
}

function validasiInput() {
  const namaKonsumen = document.getElementById("namaKonsumen").value.trim();
  if (!namaKonsumen) { alert("Nama konsumen wajib diisi!"); return false; }
  const rows = document.querySelectorAll("#daftar-item tr");
  if (rows.length === 0) { alert("Tambahkan minimal satu barang sebelum export!"); return false; }
  for (const row of rows) {
    const nama = row.querySelector("td:nth-child(2) input").value.trim();
    const jumlah = row.querySelector(".jumlah").value.trim();
    const harga = row.querySelector(".harga").value.trim();
    if (!nama || !jumlah || !harga) {
      alert("Semua kolom barang wajib diisi sebelum export!");
      return false;
    }
  }
  return true;
}

function exportNota() {
  if (!validasiInput()) return;
  hitungTotal();
  const namaKonsumen = document.getElementById("namaKonsumen").value.trim() || "tanpa-nama";
  const catatan = document.getElementById("catatan").value.trim();
  const rows = document.querySelectorAll("#daftar-item tr");
  const total = document.getElementById("total-belanja").value;
  const now = new Date();
  const tgl = String(now.getDate()).padStart(2, "0");
  const bln = String(now.getMonth() + 1).padStart(2, "0");
  const thn = String(now.getFullYear()).slice(2);
  const jam = String(now.getHours()).padStart(2, "0");
  const mnt = String(now.getMinutes()).padStart(2, "0");
  const timestamp = `${tgl}-${bln}-${thn}-${jam}${mnt}`;
  const isMobile = /Mobi|Android/i.test(navigator.userAgent);

  let html = `<h3>Nota Laundry Berkah</h3>
  <p><strong>Nama Konsumen:</strong> ${namaKonsumen}</p>
  <p><strong>Tanggal:</strong> ${tgl}/${bln}/20${thn} ${jam}:${mnt}</p>`;

  if (isMobile) {
    rows.forEach((r, i) => {
      const nama = r.querySelector('td:nth-child(2) input').value || "-";
      const jumlah = r.querySelector('.jumlah').value || "0";
      const harga = r.querySelector('.harga').value || "0";
      const subtotal = r.querySelector('.subtotal').value || "0";
      html += `<div style="margin-bottom:8px;border-bottom:1px dashed #ccc;padding-bottom:4px;">
        <strong>${i+1}. ${nama}</strong><br>
        ${jumlah} x Rp ${formatRupiah(Number(harga))}<br>
        <span style="color:#007bff;">Subtotal: Rp ${subtotal}</span>
      </div>`;
    });
  } else {
    html += `<table><thead><tr><th>#</th><th>Nama Barang</th><th>Jumlah</th><th>Harga</th>`;
    if (document.getElementById("toggleDiskon").checked) html += `<th>Diskon</th>`;
    html += `<th>Subtotal</th></tr></thead><tbody>`;
    rows.forEach((r, i) => {
      const nama = r.querySelector('td:nth-child(2) input').value || "-";
      const jumlah = r.querySelector('.jumlah').value || "0";
      const harga = r.querySelector('.harga').value || "0";
      const diskon = document.getElementById("toggleDiskon").checked ? (r.querySelector('.diskon').value || "0") + "%" : "-";
      const subtotal = r.querySelector('.subtotal').value || "0";
      html += `<tr><td>${i+1}</td><td>${nama}</td><td>${jumlah}</td><td>Rp ${formatRupiah(Number(harga))}</td>`;
      if (document.getElementById("toggleDiskon").checked) html += `<td>${diskon}</td>`;
      html += `<td>Rp ${subtotal}</td></tr>`;
    });
    html += `</tbody></table>`;
  }

  html += `<p style="text-align:right;margin-top:10px;"><strong>Total:</strong> Rp ${total}</p>`;
  if (catatan) html += `<p><strong>Catatan:</strong> ${catatan}</p>`;
  html += `<p style="text-align:center;margin-top:10px;">Terima kasih.</p>`;

  const notaSummary = document.getElementById("nota-summary");
  notaSummary.innerHTML = html;
  notaSummary.style.display = "block";

  html2canvas(notaSummary, { scale: 2 }).then(canvas => {
    const link = document.createElement("a");
    const namaFile = `${timestamp}-${namaKonsumen.replace(/\s+/g, "_")}.jpg`;
    link.download = namaFile;
    link.href = canvas.toDataURL("image/jpeg");
    link.click();
    notaSummary.style.display = "none";
    localStorage.removeItem("notaBelanja");
  });
}

function simpanKeLocalStorage() {
  const data = {
    namaKonsumen: document.getElementById("namaKonsumen").value,
    catatan: document.getElementById("catatan").value,
    gunakanDiskon: document.getElementById("toggleDiskon").checked,
    items: Array.from(document.querySelectorAll("#daftar-item tr")).map(tr => ({
      nama: tr.querySelector("td:nth-child(2) input").value,
      jumlah: tr.querySelector(".jumlah").value,
      harga: tr.querySelector(".harga").value,
      diskon: tr.querySelector(".diskon") ? tr.querySelector(".diskon").value : "",
      subtotal: tr.querySelector(".subtotal").value
    }))
  };
  localStorage.setItem("notaBelanja", JSON.stringify(data));
}

function muatDariLocalStorage() {
  const data = JSON.parse(localStorage.getItem("notaBelanja"));
  if (!data) return tambahBaris();
  document.getElementById("namaKonsumen").value = data.namaKonsumen || "";
  document.getElementById("catatan").value = data.catatan || "";
  document.getElementById("toggleDiskon").checked = data.gunakanDiskon || false;
  data.items.forEach(i => tambahBaris(i));
  toggleKolomDiskon();
  hitungTotal();
}

function resetForm() {
  localStorage.removeItem("notaBelanja");
  document.getElementById("namaKonsumen").value = "";
  document.getElementById("catatan").value = "";
  document.getElementById("toggleDiskon").checked = false;
  document.getElementById("daftar-item").innerHTML = "";
  tambahBaris();
  document.getElementById("total-belanja").value = "0";
  alert("Form telah direset untuk nota baru!");
}

window.addEventListener("load", muatDariLocalStorage);
</script>

</body>
</html>
