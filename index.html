<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Layar Kosong | Portal Berita Modern</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --primary: #3584e4;
            --secondary: #ffbf00; /* Amber */
            --bg-body: #f4f7f9;
            --bg-card: #ffffff;
            --text-main: #1a1a1a;
            --text-muted: #555555;
            --border: #e2e8f0;
            --glass: rgba(255, 255, 255, 0.8);
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-body: #0f172a;
                --bg-card: #1e293b;
                --text-main: #f1f5f9;
                --text-muted: #94a3b8;
                --border: #334155;
                --glass: rgba(30, 41, 59, 0.8);
            }
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background: var(--bg-body); 
            color: var(--text-main);
            transition: 0.3s ease;
            line-height: 1.6;
        }

        .container { max-width: 1250px; margin: 0 auto; padding: 0 20px; }
        
        /* HEADER & GLASS EFFECT */
        header {
            position: sticky; top: 0; z-index: 1000;
            background: var(--glass);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }
        .nav-box { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-family: 'Montserrat'; font-weight: 800; font-size: 1.5rem; color: var(--primary); }
        .logo span { color: var(--secondary); }
        
        .search-bar {
            background: var(--bg-body);
            border: 1px solid var(--border);
            padding: 8px 15px; border-radius: 20px;
            color: var(--text-main); outline: none; width: 250px;
        }

        /* FEATURED HERO */
        .hero {
            margin: 30px 0; border-radius: 20px; overflow: hidden;
            position: relative; height: 450px; display: flex; align-items: flex-end;
            background-size: cover; background-position: center;
            box-shadow: var(--shadow);
            animation: fadeIn 1s ease;
        }
        .hero-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
        }
        .hero-content { position: relative; padding: 40px; color: white; max-width: 700px; }
        .hero-cat { background: var(--secondary); color: black; padding: 4px 12px; border-radius: 5px; font-weight: bold; font-size: 0.8rem; }

        /* FILTER & ARCHIVE BAR */
        .toolbar {
            display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap;
            align-items: center; justify-content: space-between;
        }
        .pills { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 5px; }
        .pill { 
            padding: 8px 18px; border-radius: 20px; background: var(--bg-card); 
            border: 1px solid var(--border); cursor: pointer; white-space: nowrap;
            transition: 0.3s; font-size: 0.9rem;
        }
        .pill.active { background: var(--primary); color: white; border-color: var(--primary); }
        .pill:hover { transform: translateY(-2px); box-shadow: var(--shadow); }

        .archive-box select {
            padding: 8px; border-radius: 8px; background: var(--bg-card);
            color: var(--text-main); border: 1px solid var(--border);
        }

        /* MAIN LAYOUT */
        .main-grid { display: grid; grid-template-columns: 1fr 350px; gap: 30px; }

        /* ARTICLE CARDS */
        .news-feed { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        .card { 
            background: var(--bg-card); border-radius: 15px; overflow: hidden;
            border: 1px solid var(--border); transition: 0.3s;
            display: flex; flex-direction: column;
        }
        .card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        .card-img { height: 180px; width: 100%; object-fit: cover; }
        .card-body { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; }
        .card-title { font-family: 'Montserrat'; font-size: 1.1rem; margin-bottom: 10px; line-height: 1.4; }
        .card-excerpt { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 15px; flex-grow: 1; }
        
        /* SIDEBAR STICKY */
        aside { position: sticky; top: 90px; height: fit-content; }
        .sidebar-box { 
            background: var(--bg-card); padding: 20px; border-radius: 15px; 
            border: 1px solid var(--border); margin-bottom: 25px;
        }
        .sidebar-title { font-family: 'Montserrat'; margin-bottom: 20px; border-left: 4px solid var(--primary); padding-left: 10px; }
        .mini-item { display: flex; gap: 12px; margin-bottom: 15px; align-items: center; }
        .mini-thumb { width: 70px; height: 70px; border-radius: 10px; object-fit: cover; flex-shrink: 0; }
        .mini-text h4 { font-size: 0.85rem; line-height: 1.3; }

        /* SKELETON ANIMATION */
        .skeleton { background: #e2e8f0; animation: pulse 1.5s infinite ease-in-out; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* CONTACT FORM */
        .contact-card {
            background: var(--primary); color: white; padding: 30px; border-radius: 15px; text-align: center;
        }
        .contact-card input, .contact-card textarea {
            width: 100%; padding: 10px; margin: 5px 0; border-radius: 8px; border: none;
        }

        /* --- TOAST NOTIFICATION STYLES --- */
#toast-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
}

.toast {
    background: #2ecc71; /* Warna hijau sukses */
    color: white;
    padding: 15px 25px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    margin-top: 10px;
    /* Animasi masuk */
    animation: slideIn 0.5s ease forwards;
    transition: opacity 0.5s ease;
}

@keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}

.toast-hide {
    opacity: 0;
}
        
        /* --- NEW FOOTER STYLES --- */
.page-footer {
    background: var(--bg-card);
    border-top: 1px solid var(--border);
    padding: 50px 0 20px;
    margin-top: 50px;
}

.footer-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.footer-section p {
    font-size: 0.95rem;
    color: var(--text-main);
    font-weight: 600;
}

.footer-links {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.footer-links a {
    color: var(--text-muted);
    font-size: 0.9rem;
    text-decoration: none;
    transition: 0.3s;
}

.footer-links a:hover {
    color: var(--primary);
    padding-left: 5px;
}

.footer-social {
    display: flex;
    gap: 15px;
    font-size: 1.5rem;
}

.footer-social a {
    color: var(--text-muted);
    transition: 0.3s;
}

.footer-social a:hover {
    color: var(--primary);
    transform: translateY(-3px);
}

.footer-bottom {
    text-align: center;
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
    font-size: 0.85rem;
    color: var(--text-muted);
}
        
        /* RESPONSIVE */
        @media (max-width: 900px) {
            .main-grid { grid-template-columns: 1fr; }
            .hero { height: 350px; }
        }
    </style>
</head>
<body>

<header>
    <div class="container nav-box">
        <div class="logo">Layar <span>Kosong</span></div>
        <input type="text" id="searchInput" class="search-bar" placeholder="Cari berita seru...">
    </div>
</header>

<div class="container">
    <div id="hero" class="hero skeleton"></div>

    <div class="toolbar">
        <div class="pills" id="categoryPills">
            <div class="pill active" onclick="filterByCat('All')">Semua</div>
        </div>
        <div class="archive-box">
            <select id="yearFilter"><option value="">Tahun</option></select>
            <select id="monthFilter"><option value="">Bulan</option></select>
        </div>
    </div>

    <div class="main-grid">
        <main>
            <div id="newsFeed" class="news-feed">
                </div>
            <div style="text-align: center; margin: 40px 0;">
                <button id="loadMore" class="pill" style="padding: 12px 40px; background: var(--primary); color: white;">Muat Lebih Banyak</button>
            </div>
        </main>

        <aside>
            <div class="sidebar-box">
                <h3 class="sidebar-title">Rekomendasi Acak</h3>
                <div id="sidebarRandom"></div>
                <button onclick="renderSidebar()" style="background:none; border:none; color:var(--primary); cursor:pointer; font-size:0.8rem; width:100%; text-align:right;">‚Üª Acak Lagi</button>
            </div>

           <div class="contact-card">
    <h3>Hubungi Kami</h3>
    <p style="font-size: 0.8rem; margin-bottom: 10px;">Kirim saran atau kerjasama</p>
    
    <input type="text" id="contact-name" placeholder="Nama" required>
    <input type="email" id="contact-email" placeholder="Email" required>
    <textarea id="contact-message" placeholder="Pesan" required></textarea>
    
    <button type="button" onclick="sendToWA()" class="pill" style="width:100%; background: var(--secondary); color:black; font-weight:bold; margin-top:10px; border:none; cursor:pointer;">
        Kirim ke WhatsApp
    </button>
</div>
        </aside>
    </div>
</div>

<footer class="page-footer">
    <div class="footer-content">
        <div class="footer-section">
            <p>Pelan Kiri, Mari Kita Jaga Supaya Data Pribadi Tetap Aman.</p>
        </div>

        <div class="footer-section">
            <div class="footer-links">
                <a href="/feed.html">RSS Feed</a> 
                <a href="/sitemap.html">Peta Situs</a> 
                <a href="https://frijal.github.io" target="_blank">Kartu Nama</a> 
                <a href="https://t.me/frijal" target="_blank">Kontak Telegram</a> 
                <a href="/disclaimer.html" target="_blank">Disclaimer</a>
            </div>
        </div>

        <div class="footer-section">
            <div class="footer-social">
                <a href="https://facebook.com/frijal" title="Facebook"><i class="fa-brands fa-facebook"></i></a> 
                <a href="https://github.com/frijal" title="GitHub"><i class="fa-brands fa-square-github"></i></a> 
                <a href="https://linkedin.com/in/frijal" title="LinkedIn"><i class="fa-brands fa-linkedin"></i></a> 
                <a href="https://threads.net/frijal" title="Threads"><i class="fa-brands fa-threads"></i></a> 
                <a href="https://youtube.com/@frijal" title="YouTube"><i class="fa-brands fa-youtube"></i></a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>üÑØ 2025 - Layar Kosong - Dibuat dengan ‚ù§Ô∏è dari Balikpapan.</p>
    </div>
</footer>

<script>
    let allData = [];
    let displayedData = [];
    let limit = 6;

async function fetchData() {
        try {
            const res = await fetch('artikel.json');
            const data = await res.json();
            
            // Kosongkan array sebelum mengisi (menghindari duplikasi saat refresh)
            allData = [];

            // Flatten data dari kategori JSON
            for (const cat in data) {
                data[cat].forEach(item => {
                    allData.push({
                        category: cat,
                        title: item[0],
                        // Menambahkan folder 'artikel/' sebelum slug file .html
                        url: 'artikel/' + item[1], 
                        img: item[2],
                        date: new Date(item[3]),
                        summary: item[4]
                    });
                });
            }
            
            // Sort terbaru (berdasarkan tanggal)
            allData.sort((a, b) => b.date - a.date);
            displayedData = [...allData];

            initSite();
        } catch (e) {
            console.error("Gagal ambil data", e);
            document.getElementById('newsFeed').innerHTML = "<p>Gagal memuat konten. Pastikan file JSON tersedia.</p>";
        }
    }

    function initSite() {
        renderHero();
        renderCategories();
        renderArchives();
        renderSidebar();
        renderFeed();
        
        // Search Logic
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            displayedData = allData.filter(i => i.title.toLowerCase().includes(val));
            renderFeed(true);
        });

        // Archive Change
        document.getElementById('yearFilter').onchange = runFilters;
        document.getElementById('monthFilter').onchange = runFilters;
    }

    function renderHero() {
        const h = allData[0];
        const el = document.getElementById('hero');
        el.classList.remove('skeleton');
        el.style.backgroundImage = `url('${h.img}')`;
        el.innerHTML = `
            <div class="hero-overlay"></div>
            <div class="hero-content">
                <span class="hero-cat">${h.category}</span>
                <h1 style="font-family:'Montserrat'; font-size:2.5rem; margin:15px 0;">${h.title}</h1>
                <p>${h.summary}</p>
                <a href="${h.url}" class="pill active" style="margin-top:20px; display:inline-block; text-decoration:none;">Baca Sekarang</a>
            </div>
        `;
    }

    function renderFeed(reset = false) {
        if(reset) limit = 6;
        const container = document.getElementById('newsFeed');
        container.innerHTML = '';
        
        const items = displayedData.slice(0, limit);
        items.forEach(item => {
            container.innerHTML += `
                <div class="card" style="animation: fadeIn 0.5s ease">
                    <img src="${item.img}" class="card-img" alt="img" onerror="this.src='https://via.placeholder.com/300x180'">
                    <div class="card-body">
                        <small style="color:var(--primary); font-weight:bold">${item.category}</small>
                        <h3 class="card-title">${item.title}</h3>
                        <p class="card-excerpt">${item.summary.substring(0, 100)}...</p>
                        <a href="${item.url}" style="color:var(--primary); font-weight:600; text-decoration:none; font-size:0.9rem;">Baca Selengkapnya ‚Üí</a>
                    </div>
                </div>
            `;
        });
    }

    function renderSidebar() {
        const side = document.getElementById('sidebarRandom');
        side.innerHTML = '';
        const randoms = [...allData].sort(() => 0.5 - Math.random()).slice(0, 5);
        
        randoms.forEach(item => {
            side.innerHTML += `
                <div class="mini-item">
                    <img src="${item.img}" class="mini-thumb">
                    <div class="mini-text">
                        <h4><a href="${item.url}" style="text-decoration:none; color:inherit;">${item.title.substring(0, 50)}...</a></h4>
                        <small style="color:var(--text-muted)">${item.date.toLocaleDateString('id-ID')}</small>
                    </div>
                </div>
            `;
        });
    }

    function renderCategories() {
        const cats = [...new Set(allData.map(i => i.category))];
        const container = document.getElementById('categoryPills');
        cats.forEach(c => {
            container.innerHTML += `<div class="pill" onclick="filterByCat('${c}', this)">${c}</div>`;
        });
    }

    function renderArchives() {
        const years = [...new Set(allData.map(i => i.date.getFullYear()))];
        const ySelect = document.getElementById('yearFilter');
        years.forEach(y => ySelect.innerHTML += `<option value="${y}">${y}</option>`);
        
        const mSelect = document.getElementById('monthFilter');
        const months = ["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];
        months.forEach((m, i) => mSelect.innerHTML += `<option value="${i}">${m}</option>`);
    }

    function runFilters() {
        const y = document.getElementById('yearFilter').value;
        const m = document.getElementById('monthFilter').value;
        
        displayedData = allData.filter(i => {
            const matchY = y ? i.date.getFullYear() == y : true;
            const matchM = m !== "" ? i.date.getMonth() == m : true;
            return matchY && matchM;
        });
        renderFeed(true);
    }

    function filterByCat(cat, el) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        if(el) el.classList.add('active');
        
        displayedData = cat === 'All' ? [...allData] : allData.filter(i => i.category === cat);
        renderFeed(true);
    }

    document.getElementById('loadMore').onclick = () => {
        limit += 6;
        renderFeed();
    };

    fetchData();
    
    function showToast(message) {
    // Buat container jika belum ada
    let container = document.getElementById('toast-container');
    if (!container) {
        container = document.createElement('div');
        container.id = 'toast-container';
        document.body.appendChild(container);
    }

    // Buat elemen toast
    const toast = document.createElement('div');
    toast.className = 'toast';
    toast.innerHTML = `<i class="fa-solid fa-circle-check"></i> <span>${message}</span>`;
    
    container.appendChild(toast);

    // Hilangkan toast otomatis setelah 3 detik
    setTimeout(() => {
        toast.classList.add('toast-hide');
        setTimeout(() => toast.remove(), 500);
    }, 3000);
}

function sendToWA() {
    const name = document.getElementById('contact-name').value;
    const email = document.getElementById('contact-email').value;
    const message = document.getElementById('contact-message').value;
    
    // Validasi sederhana: Nama dan Pesan wajib diisi
    if(!name || !message) {
        alert("Nama dan Pesan jangan dikosongkan ya, Bosku!");
        return;
    }

    // Ganti dengan nomor WhatsApp kamu (format 62...)
    const noWA = "6281578163858"; 
    
    // Menyusun format pesan WhatsApp
    const text = `Halo Layar Kosong!%0A%0A*Nama:* ${name}%0A*Email:* ${email}%0A*Pesan:* ${message}`;
    
    // Panggil notifikasi Toast (fungsi showToast ada di chat sebelumnya)
    showToast("Membuka WhatsApp... Pesan siap dikirim!");

    // Jeda 1 detik agar user bisa lihat notifikasi suksesnya dulu
    setTimeout(() => {
        window.open(`https://wa.me/${noWA}?text=${text}`, '_blank');
        
        // Bersihkan input setelah berhasil
        document.getElementById('contact-name').value = "";
        document.getElementById('contact-email').value = "";
        document.getElementById('contact-message').value = "";
    }, 1200);
}
</script>

</body>
</html>
